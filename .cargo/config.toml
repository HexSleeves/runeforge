# Cargo configuration for faster builds
#
# # Faster linker
#
# LLD is a linker from the LLVM project that supports Linux, Windows, macOS, and Wasm.
# On macOS, the default ld64 linker is typically faster so we don't override it.
#
# To install LLD:
# - Ubuntu: `sudo apt-get install lld clang`
# - Fedora: `sudo dnf install lld clang`
# - Arch: `sudo pacman -S lld clang`
# - Windows: `cargo install -f cargo-binutils && rustup component add llvm-tools`
#
# For Mold on Linux (even faster): https://github.com/rui314/mold

[build]
# Enable incremental compilation for faster rebuilds
incremental = true

# Linux: Use LLD for faster linking
[target.x86_64-unknown-linux-gnu]
linker       = "clang"
rustflags    = ["-C", "link-arg=-fuse-ld=lld"]
rustdocflags = ["-C", "link-arg=-fuse-ld=lld"]

# macOS Intel: Use default ld64 (faster than LLD on macOS)
[target.x86_64-apple-darwin]
# Default linker - ld64 is faster on macOS
# Uncomment for nightly features:
# rustflags = ["-Zshare-generics=y", "-Zthreads=0"]

# macOS Apple Silicon: Use default ld64 (faster than LLD on macOS)
[target.aarch64-apple-darwin]
# Default linker - ld64 is faster on macOS
# Uncomment for nightly features:
# rustflags = ["-Zshare-generics=y", "-Zthreads=0"]

# Windows: Use rust-lld for faster linking
[target.x86_64-pc-windows-msvc]
linker       = "rust-lld.exe"
rustdocflags = ["-C", "linker=rust-lld.exe"]

# Aliases
[alias]
ci = "run --package ci --"

# Cranelift backend for faster debug builds (if available)
[unstable]
codegen-backend = true

[profile.dev]
codegen-backend = "cranelift"

[profile.dev.package."*"]
codegen-backend = "llvm"
